{"ast":null,"code":"import { CommonModule } from '@angular/common';\nimport { TableModule } from 'primeng/table';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common/http\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"primeng/table\";\nimport * as i5 from \"primeng/api\";\nfunction FetchNewsComponent_ng_template_8_th_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 8)(1, \"span\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const col_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(col_r1.header);\n  }\n}\nfunction FetchNewsComponent_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵtemplate(1, FetchNewsComponent_ng_template_8_th_1_Template, 3, 1, \"th\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const columns_r2 = ctx.$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", columns_r2);\n  }\n}\nfunction FetchNewsComponent_ng_template_9_td_1_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const col_r3 = i0.ɵɵnextContext().$implicit;\n    const rowData_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(rowData_r4[col_r3.field]);\n  }\n}\nfunction FetchNewsComponent_ng_template_9_td_1_span_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 14);\n    i0.ɵɵelement(1, \"img\", 15);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const col_r3 = i0.ɵɵnextContext().$implicit;\n    const rowData_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"src\", \"../../..\" + rowData_r4.svg_url, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(rowData_r4[col_r3.field]);\n  }\n}\nfunction FetchNewsComponent_ng_template_9_td_1_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const col_r3 = i0.ɵɵnextContext().$implicit;\n    const rowData_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(rowData_r4[col_r3.field]);\n  }\n}\nfunction FetchNewsComponent_ng_template_9_td_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 11);\n    i0.ɵɵtemplate(1, FetchNewsComponent_ng_template_9_td_1_span_1_Template, 2, 1, \"span\", 12)(2, FetchNewsComponent_ng_template_9_td_1_span_2_Template, 4, 2, \"span\", 13)(3, FetchNewsComponent_ng_template_9_td_1_span_3_Template, 2, 1, \"span\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const col_r3 = ctx.$implicit;\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.heading === \"Cash\" && col_r3.field !== \"currency\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.heading === \"Cash\" && col_r3.field === \"currency\");\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.heading !== \"Cash\");\n  }\n}\nfunction FetchNewsComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 9);\n    i0.ɵɵtemplate(1, FetchNewsComponent_ng_template_9_td_1_Template, 4, 3, \"td\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.columns);\n  }\n}\nfunction FetchNewsComponent_ng_template_10_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\")(2, \"td\", 16)(3, \"span\");\n    i0.ɵɵtext(4, \"No Records Found!\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const columns_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵattribute(\"colspan\", columns_r6.length);\n  }\n}\nfunction FetchNewsComponent_ng_template_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, FetchNewsComponent_ng_template_10_ng_container_0_Template, 5, 1, \"ng-container\", 12);\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.data.length === 0);\n  }\n}\nexport let FetchNewsComponent = /*#__PURE__*/(() => {\n  class FetchNewsComponent {\n    route;\n    http;\n    data = [];\n    columns = [];\n    heading = '';\n    constructor(route, http) {\n      this.route = route;\n      this.http = http;\n    }\n    ngOnInit() {\n      this.route.url.subscribe(urlSegments => {\n        const urlPath = urlSegments.map(segment => segment.path).join('/');\n        this.fetchNewsBasedOnUrl(urlPath);\n      });\n      this.populateSchema(this.heading);\n      this.getData(this.heading);\n    }\n    populateSchema(heading) {\n      if (heading == 'Stocks') {\n        this.columns = [{\n          field: 'stocks',\n          header: 'Stocks'\n        }, {\n          field: 'marketPrice',\n          header: 'Market Price'\n        }, {\n          field: 'change',\n          header: 'Change(%)'\n        }];\n      }\n      if (heading == 'Cash') {\n        this.columns = [{\n          field: 'currency',\n          header: 'Currency'\n        }, {\n          field: 'exchange_rate',\n          header: 'Exchange Rate'\n        }, {\n          field: 'actual_price',\n          header: 'Estimated Value(INR)'\n        }];\n      }\n      if (heading == 'Crypto') {\n        this.columns = [{\n          field: 'symbol',\n          header: 'Symbol'\n        }, {\n          field: 'cmc_rank',\n          header: 'CMC Rank'\n        }, {\n          field: 'circulating_supply',\n          header: 'Circulating Supply'\n        }, {\n          field: 'total_supply',\n          header: 'Total Supply'\n        }, {\n          field: 'max_supply',\n          header: 'Max Supply'\n        }\n        // {field:''}\n        ];\n      }\n      if (this.heading == 'FD') {\n        this.columns = [{\n          field: 'bank_name',\n          header: 'Bank Name'\n        }, {\n          field: 'citizen_rate',\n          header: 'General Citizen Rate'\n        }, {\n          field: 'old_citizen_rate',\n          header: 'Senior Citizen Rate'\n        }];\n      }\n    }\n    getData(heading) {\n      let url;\n      if (heading == 'Stocks') {\n        url = 'https://wealtsphere.onrender.com/api/portfolio/getGainers';\n        this.http.get(url).subscribe(res => {\n          if (res) {\n            this.populateData(res);\n          }\n        });\n      }\n      if (heading == 'Cash') {\n        url = 'https://wealtsphere.onrender.com/api/portfolio/exchangeRates';\n        this.http.get(url).subscribe(res => {\n          sessionStorage.setItem('ExchangeRates', JSON.stringify(res));\n          this.populateData(res);\n        });\n      }\n      if (heading == 'Crypto') {\n        url = 'https://wealtsphere.onrender.com/api/portfolio/cryptoRates';\n        this.http.get(url).subscribe(res => {\n          this.populateData(res);\n        });\n      }\n      if (heading == 'FD') {\n        url = 'https://wealtsphere.onrender.com/api/portfolio/fdRates';\n        this.http.get(url).subscribe(res => {\n          this.populateData(res);\n        });\n      }\n    }\n    populateData(res) {\n      this.data = [];\n      if (this.heading == 'Stocks') {\n        const gainers = res?.top_gainers; // Ensure you're working with the top_gainers array\n        if (gainers && gainers.length) {\n          for (let i = 0; i < 5; i++) {\n            this.data.push({\n              stocks: gainers[i]?.ticker,\n              // Access top_gainers directly\n              marketPrice: gainers[i]?.price,\n              // Change 'marketPrice' to 'price' if that's the key from the API\n              change: gainers[i]?.change_percentage // Assuming this is the key for the change percentage\n            });\n          }\n        }\n      }\n      if (this.heading == 'Cash') {\n        for (let i = 0; i < 5; i++) {\n          this.data.push({\n            currency: res[i].currency,\n            exchange_rate: res[i].exchange_rate,\n            actual_price: '₹ ' + res[i].actual_price.toFixed(2),\n            svg_url: res[i].svg_url\n          });\n        }\n      }\n      if (this.heading == 'Crypto') {\n        for (let i = 0; i < 5; i++) {\n          this.data.push({\n            symbol: res?.data[i]?.symbol,\n            cmc_rank: res?.data[i].cmc_rank,\n            circulating_supply: res?.data[i].circulating_supply,\n            total_supply: res?.data[i].total_supply,\n            max_supply: res?.data[i].max_supply\n          });\n        }\n      }\n      if (this.heading == 'FD') {\n        for (let i = 0; i < res?.length; i++) {\n          this.data.push({\n            bank_name: res[i].bank,\n            citizen_rate: res[i].generalCitizensRate,\n            old_citizen_rate: res[i].seniorCitizensRate\n          });\n        }\n      }\n    }\n    fetchNewsBasedOnUrl(url) {\n      if (url.includes('stocks')) {\n        this.heading = 'Stocks';\n      } else if (url.includes('cash')) {\n        this.heading = 'Cash';\n      } else if (url.includes('crypto')) {\n        this.heading = 'Crypto';\n      } else if (url.includes('fd')) {\n        this.heading = 'FD';\n      } else {\n        this.heading = 'Default Heading'; // You can set a default heading or handle other cases here\n      }\n    }\n    static ɵfac = function FetchNewsComponent_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || FetchNewsComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.HttpClient));\n    };\n    static ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: FetchNewsComponent,\n      selectors: [[\"app-fetch-news\"]],\n      standalone: true,\n      features: [i0.ɵɵStandaloneFeature],\n      decls: 11,\n      vars: 3,\n      consts: [[1, \"col-lg-12\"], [1, \"cardBoxShadow\"], [1, \"cardBoxShadow1\", \"mt-4\"], [3, \"columns\", \"value\", \"rows\"], [\"pTemplate\", \"header\"], [\"pTemplate\", \"body\"], [\"pTemplate\", \"footer\"], [\"class\", \"custom-header\", 4, \"ngFor\", \"ngForOf\"], [1, \"custom-header\"], [1, \"custom-row\"], [\"class\", \"custom-cell\", 4, \"ngFor\", \"ngForOf\"], [1, \"custom-cell\"], [4, \"ngIf\"], [\"class\", \"d-flex flex-row\", 4, \"ngIf\"], [1, \"d-flex\", \"flex-row\"], [1, \"flags\", 3, \"src\"], [1, \"no-record\"]],\n      template: function FetchNewsComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"span\");\n          i0.ɵɵtext(3, \"Top Movers\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(4, \"div\", 2)(5, \"span\");\n          i0.ɵɵtext(6, \"Top 5 Gainers\");\n          i0.ɵɵelementEnd()();\n          i0.ɵɵelementStart(7, \"p-table\", 3);\n          i0.ɵɵtemplate(8, FetchNewsComponent_ng_template_8_Template, 2, 1, \"ng-template\", 4)(9, FetchNewsComponent_ng_template_9_Template, 2, 1, \"ng-template\", 5)(10, FetchNewsComponent_ng_template_10_Template, 1, 1, \"ng-template\", 6);\n          i0.ɵɵelementEnd()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(7);\n          i0.ɵɵproperty(\"columns\", ctx.columns)(\"value\", ctx.data)(\"rows\", 10);\n        }\n      },\n      dependencies: [CommonModule, i3.NgForOf, i3.NgIf, TableModule, i4.Table, i5.PrimeTemplate],\n      styles: [\".cardBoxShadow[_ngcontent-%COMP%]{background-color:#f8f9fa;border-radius:8px;padding:16px;box-shadow:0 4px 8px #0000001a;display:flex;align-items:center}.cardBoxShadow[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px;border-radius:50%;margin-right:16px}.cardBoxShadow1[_ngcontent-%COMP%]{box-shadow:0 4px 8px #0003;border-radius:8px;padding:20px;margin-bottom:20px;background-color:#fff}.cardBoxShadow1[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:24px;font-weight:700;color:#00786c}.flags[_ngcontent-%COMP%]{height:2em;margin-right:1em}.cardBoxShadow[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#00786c}.custom-header[_ngcontent-%COMP%]{background-color:#00786c;color:#fff;font-weight:700;text-align:left}.custom-row[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}.custom-cell[_ngcontent-%COMP%]{padding:8px}.custom-cell[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;color:#00786c}.p-table[_ngcontent-%COMP%]{border-collapse:collapse;width:100%}.p-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left}.p-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#00786c;color:#fff}.p-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f2f2f2}.p-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#009688;color:#fff}.p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom:1px solid #ddd}.p-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block;color:#00786c}.p-table[_ngcontent-%COMP%]   td.no-record[_ngcontent-%COMP%]{text-align:center}\"]\n    });\n  }\n  return FetchNewsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}